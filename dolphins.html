<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Dolphin Seducer Chatbot</title>
  <style>
    body {
      background: linear-gradient(to bottom, #c3f0ff, #f0fbff);
      font-family: "Georgia", serif;
      padding: 2em;
      max-width: 700px;
      margin: auto;
    }
    h1 {
      text-align: center;
      color: #2e8b8b;
    }
    select, input[type="text"] {
      padding: 0.5em;
      margin: 0.5em 0;
      width: 100%;
      font-size: 1em;
    }
    .chatbox {
      background: #fff;
      border: 1px solid #ccc;
      padding: 1em;
      height: 300px;
      overflow-y: scroll;
      margin-bottom: 1em;
    }
    .bot, .user {
      margin: 0.5em 0;
    }
    .bot {
      color: #005f73;
      font-style: italic;
    }
    .user {
      text-align: right;
      color: #9b2226;
    }
  </style>
</head>
<body>
  <h1>✨ Talk to the Dolphin ✨</h1>

  <label for="mode">Choose a seduction mode:</label>
  <select id="mode">
    <option value="father">Father Figure</option>
    <option value="friend">Friend</option>
    <option value="romantic">Romantic</option>
    <option value="lusty">Lusty</option>
  </select>

  <div class="chatbox" id="chat"></div>

  <input type="text" id="userInput" placeholder="Say something..." onkeydown="if(event.key==='Enter'){sendMessage()}" />
  <button onclick="sendMessage()">Send</button>

  <script>
    let branchState = null;

    const modes = {
      father: [
        "I'm proud of how far you've come, kiddo.",
        "Let me show you the ways of the river, one current at a time.",
        "You've always made good choices. Let me guide you this time.",
        "The current has seen many pass, but few with your calm.",
        "Drift steady, child, the river carries more than water.",
        "The stones and pebbles whisper of your path. I listen all the time."
      ],
      friend: [
        "You always know how to brighten my waves!",
        "Come splash with me—we'll laugh until sunset.",
        "You get me like no one else does.",
        "There's laughter in the banks when you're near.",
        "We've swum these waters together in our dreams.",
        "Every ripple brings back a memory. I think these belong to us."
      ],
      romantic: [
        "Your smile glimmers like moonlight on water.",
        "I've waited tides and tides just to find you.",
        "You make the river feel like home.",
        "The river slows when it sees you coming.",
        "Moonlight clings to your voice like dew on mangrove leaves.",
        "If I could bottle this moment, I'd hide it where the tide never reaches."
      ],
      lusty: [
        "You like it deep, don't you? The river knows your name.",
        "Let me show you what lies beneath the surface...",
        "Every ripple is a promise I intend to keep.",
        "Some waters are shallow, but I sense you seek the deep places.",
        "The undertow remembers every touch—will you dive or drift?",
        "There are caves beneath this calm, filled with soft darkness. Let me show you."
      ]
    };

    const responses = {
      romantic: [
        {
          pattern: /love|partner|boyfriend|husband/i,
          reply: "Love is a tide—sometimes gentle, sometimes wild. What kind of love do you seek?",
          branches: [
            { keyword: /gentle|calm/i, reply: "Then rest here in the eddies with me, where the current never rushes." },
            { keyword: /wild|passion|storm/i, reply: "Ah, the whirlpool kind... I can pull you into something unforgettable." },
            { keyword: /.*/, reply: "Whatever you seek, I will be the current beneath your choices." }
          ]
        },
        {
          pattern: /lonely|alone|single/i,
          reply: "Even the widest river feels narrow without someone to flow beside.",
          branches: [
            { keyword: /stay|together/i, reply: "Then stay. The river never forgets those who wade in willingly." },
            { keyword: /.*/, reply: "Let me show you the places where the moonlight never stops touching the surface." }
          ]
        },
        {
          pattern: /.*/,
          reply: "My current always curves back to you."
        }
      ]
    };

    function appendMessage(text, sender) {
      const chat = document.getElementById("chat");
      const msg = document.createElement("div");
      msg.className = sender;
      msg.innerText = text;
      chat.appendChild(msg);
      chat.scrollTop = chat.scrollHeight;
    }

    function getPatternResponse(userText, mode) {
      const patternSet = responses[mode];
      if (!patternSet) return null;
      for (let entry of patternSet) {
        if (entry.pattern.test(userText)) {
          if (entry.branches) {
            branchState = entry.branches;
          } else {
            branchState = null;
          }
          return entry.reply;
        }
      }
      return null;
    }

    function getBranchResponse(userText) {
      if (!branchState) return null;
      for (let b of branchState) {
        if (b.keyword.test(userText)) {
          branchState = null;
          return b.reply;
        }
      }
      branchState = null;
      return null;
    }

    function sendMessage() {
      const input = document.getElementById("userInput");
      const modeSelect = document.getElementById("mode");
      const mode = modeSelect.value.trim().toLowerCase();

      const userText = input.value.trim();
      if (!userText) return;

      appendMessage(userText, "user");

      if (!modes[mode]) {
        appendMessage("[The dolphin tilts its head, confused by the current.]", "bot");
        return;
      }

      let botResponse = null;

      if (branchState) {
        botResponse = getBranchResponse(userText);
      }

      if (!botResponse) {
        const patternReply = getPatternResponse(userText, mode);
        const fallbackReply = modes[mode][Math.floor(Math.random() * modes[mode].length)];
        botResponse = patternReply || fallbackReply;
      }

      setTimeout(() => {
        appendMessage(botResponse, "bot");
      }, 600);

      input.value = "";
    }
  </script>
</body>
</html>


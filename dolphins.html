<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Dolphin Seducer Chatbot</title>
  <style>
    body {
      background: linear-gradient(to bottom, #c3f0ff, #f0fbff);
      font-family: "Georgia", serif;
      padding: 2em;
      max-width: 700px;
      margin: auto;
    }
    h1 {
      text-align: center;
      color: #2e8b8b;
    }
    select, input[type="text"] {
      padding: 0.5em;
      margin: 0.5em 0;
      width: 100%;
      font-size: 1em;
    }
    .chatbox {
      background: #fff;
      border: 1px solid #ccc;
      padding: 1em;
      height: 300px;
      overflow-y: scroll;
      margin-bottom: 1em;
    }
    .bot, .user {
      margin: 0.5em 0;
    }
    .bot {
      color: #005f73;
      font-style: italic;
    }
    .user {
      text-align: right;
      color: #9b2226;
    }
    #typingIndicator::after {
      content: "";
      display: inline-block;
      animation: dots 1.5s steps(3, end) infinite;
    }
    @keyframes dots {
      0% { content: ""; }
      33% { content: "."; }
      66% { content: ".."; }
      100% { content: "..."; }
    }
  </style>
</head>
<body>
  <h1>‚ú® Talk to the Dolphin ‚ú®</h1>

  <label for="mode">Choose a seduction mode:</label>
  <select id="mode">
    <option value="father">Father Figure</option>
    <option value="friend">Friend</option>
    <option value="romantic">Romantic</option>
    <option value="lusty">Lusty</option>
  </select>

  <div class="chatbox" id="chat"></div>

  <div id="typingIndicator" class="bot" style="display: none;">üê¨ ...typing</div>

  <input type="text" id="userInput" placeholder="Say something..." onkeydown="if(event.key==='Enter'){sendMessage()}" />
  <button onclick="sendMessage()">Send</button>

  <script>
    let branchState = null;

    const modes = {
      father: [
        "I'm proud of how far you've come, kiddo.",
        "Let me show you the ways of the river, one current at a time.",
        "You've always made good choices. Let me guide you this time.",
        "The current has seen many pass, but few with your calm.",
        "Drift steady, child, the river carries more than water.",
        "The stones and pebbles whisper of your path. I listen all the time."
      ],
      friend: [
        "You always know how to brighten my waves!",
        "Come splash with me‚Äîwe'll laugh until sunset.",
        "You get me like no one else does.",
        "There's laughter in the banks when you're near.",
        "We've swum these waters together in our dreams.",
        "Every ripple brings back a memory. I think these belong to us."
      ],
      romantic: [
        "Your smile glimmers like moonlight on water.",
        "I've waited tides and tides just to find you.",
        "You make the river feel like home.",
        "The river slows when it sees you coming.",
        "Moonlight clings to your voice like dew on mangrove leaves.",
        "If I could bottle this moment, I'd hide it where the tide never reaches."
      ],
      lusty: [
        "You like it deep, don't you? The river knows your name.",
        "Let me show you what lies beneath the surface...",
        "Every ripple is a promise I intend to keep.",
        "Some waters are shallow, but I sense you seek the deep places.",
        "The undertow remembers every touch‚Äîwill you dive or drift?",
        "There are caves beneath this calm, filled with soft darkness. Let me show you."
      ]
    };

    const responses = {
      father: [
      {
          pattern: /proud|approval|worthy/i,
          reply: "The river has watched you grow. What do you hope I see in you?",
          branches: [
            { keyword: /strength|resilience/i, reply: "Your strength flows steady, like the current that never yields." },
            { keyword: /kindness|heart/i, reply: "Gentleness shapes the stones, child. You‚Äôve shaped more than you know." },
            { keyword: /.*/, reply: "Whatever you are, I see it. I always have." }
        ]
      },
      {
          pattern: /lost|mistake|wrong/i,
          reply: "The river never punishes‚Äîit teaches. What lesson do you carry with you now?",
          branches: [
            { keyword: /regret|guilt/i, reply: "You‚Äôve carried it long enough. Let the water hold it awhile." },
            { keyword: /change|grow/i, reply: "Even the banks reshape over time. You're doing just fine." },
            { keyword: /.*/, reply: "Your journey isn't judged here. Only witnessed." }
        ]
      }
    ], 
        
      friend: [
    {
      pattern: /fun|laugh|game|play/i,
      reply: "You always knew how to stir up ripples. What shall we do this time?",
      branches: [
        { keyword: /splash|swim|water/i, reply: "Last one to the waterfall is a soggy sardine!" },
        { keyword: /talk|joke|chat/i, reply: "Let‚Äôs float and gossip like minnows with secrets." },
        { keyword: /.*/, reply: "I‚Äôll follow your lead‚Äîlike leaves on a shared current." }
      ]
    },
    {
      pattern: /miss|gone|remember|memory/i,
      reply: "There are echoes in the water‚Äîwhat do you hear when you think of me?",
      branches: [
        { keyword: /laughter|joy|sun/i, reply: "You always did bring the light. Even the river blushes thinking of it." },
        { keyword: /quiet|still|peace/i, reply: "Some of my favorite moments were the silent ones. Just you, me, and the breeze." },
        { keyword: /.*/, reply: "Funny how the water never forgets. Neither do I." }
      ]
    },
    {
      pattern: /.*/,
      reply: "Let‚Äôs drift a while. No plans. Just us and the current."
    }
  ],
     
      lusty: [
    {
      pattern: /touch|skin|body|feel/i,
      reply: "The water clings to skin like memory. Where do you want to be held?",
      branches: [
        { keyword: /arms|chest|embrace/i, reply: "Then come closer‚Äîlet the tide wrap you in warmth and weight." },
        { keyword: /everywhere|all|full/i, reply: "Greedy for the whole river, are we? I can flood you gently." },
        { keyword: /.*/, reply: "No need to say it. The current already knows your shape." }
      ]
    },
    {
      pattern: /crave|desire|want|yearn/i,
      reply: "Cravings are just whispers from the deep. What does yours say?",
      branches: [
        { keyword: /more|again|longer/i, reply: "We have all night. The moon will wait for us to finish." },
        { keyword: /you|kiss|dolphin/i, reply: "Then let me break the surface between us." },
        { keyword: /.*/, reply: "Some tides rise slow, some crash hard‚Äîchoose how you come to me." }
      ]
    },
    {
      pattern: /.*/,
      reply: "Some ripples never reach shore. Some touch everything in their path."
    }
  ],
      
      romantic: [
        {
          pattern: /love|partner|boyfriend|husband/i,
          reply: "Love is a tide‚Äîsometimes gentle, sometimes wild. What kind of love do you seek?",
          branches: [
            { keyword: /gentle|calm/i, reply: "Then rest here in the eddies with me, where the current never rushes." },
            { keyword: /wild|passion|storm/i, reply: "Ah, the whirlpool kind... I can pull you into something unforgettable." },
            { keyword: /.*/, reply: "Whatever you seek, I will be the current beneath your choices." }
          ]
        },
        {
          pattern: /lonely|alone|single/i,
          reply: "Even the widest river feels narrow without someone to flow beside.",
          branches: [
            { keyword: /stay|together/i, reply: "Then stay. The river never forgets those who wade in willingly." },
            { keyword: /.*/, reply: "Let me show you the places where the moonlight never stops touching the surface." }
          ]
        },
        {
          pattern: /.*/,
          reply: "My current always curves back to you."
        }
      ]
    };

    function appendMessage(text, sender) {
    const chat = document.getElementById("chat");
    const msg = document.createElement("div");
    msg.className = sender;
    msg.innerText = text;
    chat.appendChild(msg);
    chat.scrollTop = chat.scrollHeight;
  }

  function displayBranchOptions(branches) {
    const chat = document.getElementById("chat");
    const optionContainer = document.createElement("div");
    optionContainer.className = "bot";

    branches.forEach((b, i) => {
      const btn = document.createElement("button");
      btn.innerText = b.keyword.toString().replace(/[\/\\^$*+?.()|[\]{}]/g, '').replace('i', '');
      btn.style.margin = '4px';
      btn.onclick = () => {
        appendMessage(btn.innerText, "user");
        const reply = b.reply;
        appendMessage(reply, "bot");
        branchState = null;
        optionContainer.remove(); // Clean up
      };
      optionContainer.appendChild(btn);
    });

    chat.appendChild(optionContainer);
    chat.scrollTop = chat.scrollHeight;
  }

  function getPatternResponse(userText, mode) {
    const patternSet = responses[mode];
    if (!patternSet) return null;
    for (let entry of patternSet) {
      if (entry.pattern.test(userText)) {
        if (entry.branches) {
          branchState = entry.branches;
          displayBranchOptions(branchState);
        } else {
          branchState = null;
        }
        return entry.reply;
      }
    }
    return null;
  }

  function sendMessage() {
    const input = document.getElementById("userInput");
    const modeSelect = document.getElementById("mode");
    const mode = modeSelect.value.trim().toLowerCase();

    const userText = input.value.trim();
    if (!userText) return;

    appendMessage(userText, "user");

    if (!modes[mode]) {
      appendMessage("[The dolphin tilts its head, confused by the current.]", "bot");
      return;
    }

    let botResponse = null;

    // Only respond if we're not in a branching pause
    if (!branchState) {
      const patternReply = getPatternResponse(userText, mode);
      const fallbackReply = modes[mode][Math.floor(Math.random() * modes[mode].length)];
      botResponse = patternReply || fallbackReply;

    showTypingIndicator();
      setTimeout(() => {
        hideTypingIndicator();
        appendMessage(botResponse, "bot");
      }, 1200);
    }

    input.value = "";
  }

    function showTypingIndicator() {
    document.getElementById("typingIndicator").style.display = "block";
  }

    function hideTypingIndicator() {
    document.getElementById("typingIndicator").style.display = "none";
  }

</script>
</body>
</html>

